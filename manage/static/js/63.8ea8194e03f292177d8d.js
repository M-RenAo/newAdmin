webpackJsonp([63],{1016:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:14,offset:4}},[a("el-form",{ref:"appForm",staticClass:"form food_form",attrs:{model:e.appForm,rules:e.rules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"应用名称",prop:"appName"}},[a("el-input",{model:{value:e.appForm.appName,callback:function(t){e.$set(e.appForm,"appName",t)},expression:"appForm.appName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用简介",prop:"fileSummary"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:20,placeholder:"请输入内容且不要超过20个字"},model:{value:e.appForm.fileSummary,callback:function(t){e.$set(e.appForm,"fileSummary",t)},expression:"appForm.fileSummary"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用介绍",prop:"fileMessage"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.appForm.fileMessage,callback:function(t){e.$set(e.appForm,"fileMessage",t)},expression:"appForm.fileMessage"}})],1),e._v(" "),a("el-form-item",{staticClass:"icon-el",attrs:{label:"应用图标"}},[a("input",{staticClass:"upload",staticStyle:{opacity:"0",width:"148px",height:"148px","z-index":"222"},attrs:{type:"file"},on:{change:e.add_img}}),e._v(" "),a("div",{staticClass:"icon-plus-container"},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),""!=e.uploadIconUrl?a("div",{staticClass:"img-wrap"},[a("img",{staticClass:"border-radius",staticStyle:{width:"146px",height:"146px"},attrs:{src:"https://imapp-image.oss-cn-hangzhou.aliyuncs.com/"+e.uploadIconUrl}})]):e._e()]),e._v(" "),a("el-form-item",{staticClass:"icon-els",attrs:{label:"应用图片"}},[a("div",{staticClass:"addImage"},[a("input",{staticClass:"upload img-wrap",staticStyle:{opacity:"0","z-index":"999"},attrs:{type:"file"},on:{change:e.add_imgs}}),e._v(" "),a("div",{staticClass:"img-wrap",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[a("i",{staticClass:"el-icon-plus"})])]),e._v(" "),a("div",{staticStyle:{"max-width":"400px",height:"auto"}},e._l(e.appimageUrlArray,function(t,r){return""!=e.imageUrl?a("div",{key:r,staticStyle:{display:"inline-block","margin-left":"10px",position:"relative"}},[a("img",{staticClass:"border-radius ",attrs:{src:"https://imapp-image.oss-cn-hangzhou.aliyuncs.com/"+t},on:{click:function(t){e.bigImg(r)}}}),e._v(" "),a("i",{staticClass:"delete el-icon-close",on:{click:function(t){e.removeImage(r)}}})]):e._e()}))]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.nextpart(e.appForm)}}},[e._v("下一步")])],1)],1)],1)],1),e._v(" "),e.showBigImg?a("div",{staticClass:"imgMask",on:{click:function(t){t.stopPropagation(),e.showBigImg=!e.showBigImg}}},[a("i",{staticClass:"prev el-icon-arrow-left",on:{click:function(t){return t.stopPropagation(),e.prev(t)}}}),e._v(" "),a("div",{staticClass:"showImg"},[a("img",{staticClass:"bigImg",attrs:{src:"  https://imapp-image.oss-cn-hangzhou.aliyuncs.com/"+e.appimageUrlArray[e.num]}})]),e._v(" "),a("i",{staticClass:"next el-icon-arrow-right",on:{click:function(t){return t.stopPropagation(),e.next(t)}}})]):e._e()],1)},staticRenderFns:[]}},245:function(e,t,a){a(897);var r=a(58)(a(693),a(1016),null,null);e.exports=r.exports},315:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"a",function(){return o});var r="",o=void 0;r="//elm.cangdu.org",o="//elm.cangdu.org/img/"},439:function(e,t,a){a(442);var r=a(58)(a(440),a(443),"data-v-771ef16e",null);e.exports=r.exports},440:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(110),o=a.n(r),i=a(109),n=a.n(i),s=a(59),l=a.n(s),p=a(108),c=(a.n(p),a(315)),d=a(111);t.default={data:function(){return{baseImgPath:c.a}},created:function(){},computed:l()({},a.i(d.b)(["adminInfo"])),methods:{handleCommand:function(e){var t=this;return n()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:"home"==e?t.$router.push("/manage"):"singout"==e&&(sessionStorage.removeItem("token"),t.$router.push("/"));case 1:case"end":return a.stop()}},a,t)}))()}}}},441:function(e,t,a){t=e.exports=a(241)(!1),t.push([e.i,".allcover[data-v-771ef16e]{position:absolute;top:0;right:0}.ctt[data-v-771ef16e]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.tb[data-v-771ef16e]{position:absolute;top:50%;transform:translateY(-50%)}.lr[data-v-771ef16e]{position:absolute;left:50%;transform:translateX(-50%)}.header_container[data-v-771ef16e]{background-color:#eff2f7;height:60px;display:flex;justify-content:space-between;align-items:center;width:100%}.avator[data-v-771ef16e]{width:36px;height:36px;border-radius:50%;margin-right:37px}.el-dropdown-menu__item[data-v-771ef16e]{text-align:center}",""])},442:function(e,t,a){var r=a(441);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(242)("31846a3f",r,!0)},443:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header_container"},[a("el-breadcrumb",{staticStyle:{"padding-left":"20px"},attrs:{separator:"/"}},e._l(e.$route.meta,function(t,r){return a("el-breadcrumb-item",{key:r},[e._v(e._s(t))])})),e._v(" "),a("el-dropdown",{attrs:{"menu-align":"start"},on:{command:e.handleCommand}},[a("img",{staticClass:"avator",attrs:{src:e.baseImgPath+e.adminInfo.avatar}}),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"home"}},[e._v("首页")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"singout"}},[e._v("退出")])],1)],1)],1)},staticRenderFns:[]}},693:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(110),o=a.n(r),i=a(109),n=a.n(i),s=a(439),l=a.n(s),p=a(108),c=(a.n(p),a(315));a(1);t.default={data:function(){return{imageUrl:"",appimageUrlArray:[],baseUrl:c.b,baseImgPath:c.a,num:0,showBigImg:!1,dialogImageUrl:"",uploadIconUrl:"",dialogVisible:!1,UploadUrl:"",uploadHeader:"",imgs:[],imgData:{accept:"image/gif, image/jpeg, image/png, image/jpg,image/webp"},appForm:{name:"",message:"",icon:"",version:"",summary:"",showPict:"",packageName:""},rules:{appName:[{required:!0,message:"请输入应用名称",trigger:"blur"}],version:[{required:!0,message:"请输入版本号",trigger:"blur"}],fileMessage:[{required:!0,message:"请输入介绍",trigger:"blur"}],packageName:[{required:!0,message:"请输入包名",trigger:"blur"}],fileSummary:[{required:!0,message:"请输入简介",trigger:"blur"}]}}},components:{headTop:l.a},created:function(){},computed:{},methods:{add_img:function(e){var t=this,a=null;this.$ajax.get(BaseUrl+"alioss/getpolicy",{params:{fileName:e.target.files[0].name,type:"image",callBackType:"app_image"},headers:{token:sessionStorage.getItem("token")}}).then(function(r){if(200==r.data.flag)a=r.data.data,t.UploadUrl=r.data.data.host;else{if(201!=r.data.flag)return void alert("权限获取失败！");t.$alert(r.data.msg+"，请重新登录","提示",{confirmButtonText:"确定",callback:function(e){t.$router.push("/")}})}var o=e.target.files[0],i=o.type;console.log(i);o.size;if(console.log(o),-1==t.imgData.accept.indexOf(i))return alert("请选择我们支持的图片格式！"),!1;var n=new FormData;n.append("key",a.key),n.append("OSSAccessKeyId",a.OSSAccessKeyId),n.append("expire",a.expire),n.append("policy",a.policy),n.append("Signature",a.Signature),n.append("callback",a.callback),n.append("file",o),n.append("x:user",sessionStorage.getItem("userName")),n.append("x:filename",a.fileName),n.append("x:type",a.type),t.$ajax({method:"POST",url:t.UploadUrl,data:n}).then(function(e){t.uploadIconUrl=e.data.data,t.appForm.fileIcon=e.data.data})})},add_imgs:function(e){var t=this,a=null;this.$ajax.get(BaseUrl+"alioss/getpolicy",{params:{fileName:e.target.files[0].name,type:"image",callBackType:"app_image"},headers:{token:sessionStorage.getItem("token")}}).then(function(r){if(200==r.data.flag)a=r.data.data,t.UploadUrl=r.data.data.host;else{if(201!=r.data.flag)return void alert("权限获取失败！");t.$alert(r.data.msg+"，请重新登录","提示",{confirmButtonText:"确定",callback:function(e){t.$router.push("/")}})}var o=e.target.files[0],i=o.type;o.size;if(-1==t.imgData.accept.indexOf(i))return alert("请选择我们支持的图片格式！"),!1;var n=new FormData;n.append("key",a.key),n.append("OSSAccessKeyId",a.OSSAccessKeyId),n.append("expire",a.expire),n.append("policy",a.policy),n.append("Signature",a.Signature),n.append("callback",a.callback),n.append("file",o),n.append("x:user",sessionStorage.getItem("userName")),n.append("x:filename",a.fileName),n.append("x:type",a.type),t.$ajax({method:"POST",url:t.UploadUrl,data:n}).then(function(e){t.imageUrl=e.data.data,t.appimageUrlArray.push(e.data.data),t.appForm.fileShow=t.appimageUrlArray.join(","),console.log(">>>>>>>",t.appForm.showPict)})})},nextpart:function(e){var t=this;alert(),this.$refs.appForm.validate(function(){var a=n()(o.a.mark(function a(r){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!r||""==t.uploadIconUrl||0==t.appimageUrlArray.length){a.next=4;break}t.$ajax({method:"POST",url:BaseUrl+"apply/create/android",data:e,headers:{token:sessionStorage.getItem("token"),device:t.$route.query.type}}).then(function(e){"应用详情创建失败!"!=e.data.msg?t.$router.push({path:"/uploadApp",query:{id:e.data.data,type:t.$route.query.type}}):201==e.data.flag?t.$alert(e.data.msg+"，请重新登录","提示",{confirmButtonText:"确定",callback:function(e){t.$router.push("/")}}):t.$alert(e.data.msg,"提示",{confirmButtonText:"确定",callback:function(a){t.$message({type:"info",message:"error: "+e.data.msg})}})}),a.next=6;break;case 4:return""==t.uploadIconUrl&&r?t.$alert("请上传应用图标",{confirmButtonText:"确定",callback:function(e){t.$message({type:"info",message:"请重试！"})}}):0==t.appimageUrlArray.length&&r?t.$alert("请上传应用图片",{confirmButtonText:"确定",callback:function(e){t.$message({type:"info",message:"请重试！"})}}):t.$alert("请填写完整",{confirmButtonText:"确定",callback:function(e){t.$message({type:"info",message:"请重试！"})}}),a.abrupt("return",!1);case 6:case"end":return a.stop()}},a,t)}));return function(e){return a.apply(this,arguments)}}())},bigImg:function(e){this.showBigImg=!0,this.num=e},prev:function(){0==this.num&&(this.num=this.appimageUrlArray.length),this.num--},next:function(){this.num==this.appimageUrlArray.length-1&&(this.num=-1),this.num++},removeImage:function(e){this.appimageUrlArray.splice(e,1),this.appForm.showPict=this.appimageUrlArray.join(","),console.log(this.appimageUrlArray)}}}},792:function(e,t,a){t=e.exports=a(241)(!1),t.push([e.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.form{min-width:400px;margin-bottom:30px}.form:hover{box-shadow:0 0 8px 0 rgba(232,237,250,.6),0 2px 4px 0 rgba(232,237,250,.5);border-radius:6px;transition:all .4s}.border-radius{border-radius:6px;height:auto;width:148px}.img-wrap{width:148px;height:148px}.form_header{text-align:center;margin-bottom:10px}.category_select{border:1px solid #eaeefb;padding:10px 30px 10px 10px;border-top-right-radius:6px;border-top-left-radius:6px}.add_category_row{height:0;overflow:hidden;transition:all .4s;background:#f9fafc}.showEdit{height:185px}.add_category{background:#f9fafc;padding:10px 30px 0 10px;border:1px solid #eaeefb;border-top:none}.icon-plus-container{display:flex;justify-content:center;align-items:center}.add_category_button{text-align:center;line-height:40px;border-bottom-right-radius:6px;border-bottom-left-radius:6px;border:1px solid #eaeefb;border-top:none;transition:all .4s}.add_category_button:hover{background:#f9fafc}.add_category_button:hover .edit_icon,.add_category_button:hover span{color:#20a0ff}.add_category_button span{font-size:14px;color:#999;transition:all .4s}.add_category_button .edit_icon{color:#ccc;transition:all .4s}.avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.avatar-uploader .el-upload:hover{border-color:#20a0ff}.avatar-uploader-icon{font-size:28px;color:#8c939d;width:120px;height:120px;line-height:120px;text-align:center}.avatar{width:120px;height:120px;display:block}.cell{text-align:center}.icon-el{height:147px;position:relative}.icon-el .el-form-item__content{display:flex;position:absolute}.icon-el div.el-form-item__content{border:0!important}.icon-el div{background-color:#fbfdff;border:1px dashed #c0ccda;border-radius:6px;box-sizing:border-box;width:148px;height:148px;cursor:pointer;line-height:146px;vertical-align:top;position:absolute}.icon-els{position:relative;line-height:0!important}.icon-els .el-form-item__content{display:flex;line-height:0!important}.icon-els .addImage{background-color:#fbfdff;border:1px dashed #c0ccda;border-radius:6px;box-sizing:border-box;width:148px;height:148px;cursor:pointer;line-height:146px;vertical-align:top}.icon-els .addImage .img-wrap,.imgMask{position:absolute}.imgMask{height:100%;width:100%;top:0;left:0;z-index:10000;background:rgba(0,0,0,.6)}.showImg{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);text-align:center}.bigImg,.showImg{height:auto;width:500px}.prev{left:10px}.next,.prev{position:absolute;top:50%;width:40px;height:40px;color:#fff;transform:translate(10px,-50%)}.next{right:20px}.delete{position:absolute;top:0;right:0;width:40px;height:40px;color:#8c939d;text-align:center;font-size:18px}",""])},897:function(e,t,a){var r=a(792);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(242)("148176c1",r,!0)}});