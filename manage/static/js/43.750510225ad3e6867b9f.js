webpackJsonp([43],{1005:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticStyle:{"margin-top":"300px",display:"flex","justify-content":"center"}},[a("div",[a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"el-button el-button--primary el-button--small",staticStyle:{height:"28px"}},[a("div",{staticStyle:{position:"absolute"}},[t._v(" 选取文件")]),t._v(" "),"android"==t.$route.query.type?a("input",{staticStyle:{display:"block",opacity:"0",width:"50px"},attrs:{type:"file",accept:".apk"},on:{change:t.add_app}}):t._e(),t._v(" "),"ios"==t.$route.query.type?a("input",{staticStyle:{display:"block",opacity:"0",width:"50px"},attrs:{type:"file",accept:".ipa"},on:{change:t.add_app}}):t._e()]),t._v(" "),a("el-button",{ref:"upload",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success",readonly:""},on:{click:t.submitUpload}},[t._v("上传到服务器")])],1),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传"+t._s(t.filetype)+"文件")]),t._v(" "),a("div",[t._v(t._s(t.fileName))])])]),t._v(" "),a("div",{staticClass:"progress-wrap"},[t.showProgressSteps?a("el-steps",{staticClass:"steps-style",attrs:{space:200,active:t.progressStepsActive,"finish-status":"success"}},[a("el-step",{attrs:{title:"正在上传"}}),t._v(" "),a("el-step",{attrs:{title:"上传完毕"}}),t._v(" "),a("el-step",{attrs:{title:"正在配置"}}),t._v(" "),a("el-step",{attrs:{title:"配置成功"}})],1):t._e()],1)],1)},staticRenderFns:[]}},306:function(t,e,a){a(885);var o=a(58)(a(756),a(1005),null,null);t.exports=o.exports},315:function(t,e,a){"use strict";a.d(e,"b",function(){return o}),a.d(e,"a",function(){return s});var o="",s=void 0;o="//elm.cangdu.org",s="//elm.cangdu.org/img/"},439:function(t,e,a){a(442);var o=a(58)(a(440),a(443),"data-v-771ef16e",null);t.exports=o.exports},440:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(110),s=a.n(o),r=a(109),n=a.n(r),i=a(59),l=a.n(i),p=a(108),c=(a.n(p),a(315)),d=a(111);e.default={data:function(){return{baseImgPath:c.a}},created:function(){},computed:l()({},a.i(d.b)(["adminInfo"])),methods:{handleCommand:function(t){var e=this;return n()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:"home"==t?e.$router.push("/manage"):"singout"==t&&(sessionStorage.removeItem("token"),e.$router.push("/"));case 1:case"end":return a.stop()}},a,e)}))()}}}},441:function(t,e,a){e=t.exports=a(241)(!1),e.push([t.i,".allcover[data-v-771ef16e]{position:absolute;top:0;right:0}.ctt[data-v-771ef16e]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.tb[data-v-771ef16e]{position:absolute;top:50%;transform:translateY(-50%)}.lr[data-v-771ef16e]{position:absolute;left:50%;transform:translateX(-50%)}.header_container[data-v-771ef16e]{background-color:#eff2f7;height:60px;display:flex;justify-content:space-between;align-items:center;width:100%}.avator[data-v-771ef16e]{width:36px;height:36px;border-radius:50%;margin-right:37px}.el-dropdown-menu__item[data-v-771ef16e]{text-align:center}",""])},442:function(t,e,a){var o=a(441);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(242)("31846a3f",o,!0)},443:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header_container"},[a("el-breadcrumb",{staticStyle:{"padding-left":"20px"},attrs:{separator:"/"}},t._l(t.$route.meta,function(e,o){return a("el-breadcrumb-item",{key:o},[t._v(t._s(e))])})),t._v(" "),a("el-dropdown",{attrs:{"menu-align":"start"},on:{command:t.handleCommand}},[a("img",{staticClass:"avator",attrs:{src:t.baseImgPath+t.adminInfo.avatar}}),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"home"}},[t._v("首页")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"singout"}},[t._v("退出")])],1)],1)],1)},staticRenderFns:[]}},756:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(116),s=a.n(o),r=a(439),n=a.n(r);a(315);e.default={data:function(){return{fileName:"",uploadPolicy:"",UploadUrl:"",file:"",showProgress:!1,progressStepsActive:0,showProgressSteps:!0,filetype:""}},components:{headTop:n.a},created:function(){"android"==this.$route.query.type?this.filetype="apk":"ios"==this.$route.query.type&&(this.filetype="ipa")},computed:{},methods:{add_app:function(t){var e=this,a=this;this.file=t.target.files[0],this.$ajax.get(BaseUrl+"alioss/getpolicy",{params:{fileName:t.target.files[0].name,type:"apply",callBackType:"apply"},headers:{token:sessionStorage.getItem("token"),device:a.$route.query.type}}).then(function(a){if(200==a.data.flag)e.uploadPolicy=a.data.data,e.UploadUrl=a.data.data.host;else{if(201!=a.data.flag)return void alert("权限获取失败！");e.$alert(a.data.msg+"，请重新登录","提示",{confirmButtonText:"确定",callback:function(t){e.$router.push("/")}})}e.fileName=t.target.files[0].name})},submitUpload:function(){var t=this,e=this,a=new s.a(function(t,a){var o=this,s=new FormData,r=e.file,n=r.type;console.log(n);r.size;s.append("key",e.uploadPolicy.key),s.append("OSSAccessKeyId",e.uploadPolicy.OSSAccessKeyId),s.append("expire",e.uploadPolicy.expire),s.append("policy",e.uploadPolicy.policy),s.append("Signature",e.uploadPolicy.Signature),s.append("Content-Disposition",e.uploadPolicy["Content-Disposition"]),s.append("callback",e.uploadPolicy.callback),s.append("file",r),s.append("x:appid",e.$route.query.id),s.append("x:user",sessionStorage.getItem("userName")),s.append("x:filename",e.uploadPolicy.fileName),s.append("x:type",e.uploadPolicy.type),e.$ajax({method:"POST",url:e.UploadUrl,data:s,onUploadProgress:function(t){t.lengthComputable&&(e.progressStepsActive=1)}}).then(function(s){500==s.data.flag?(e.$alert(s.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){e.$message({type:"info",message:"error: "+s.data.msg})}}),a(error)):200==s.data.flag?(e.progressStepsActive=2,t(s.data.flag)):201==s.data.flag&&o.$alert(s.data.msg+"，请重新登录","提示",{confirmButtonText:"确定",callback:function(t){o.$router.push("/")}})})}),o=new s.a(function(t,a){var o=e.file,s=new FormData;s.append("key",e.uploadPolicy.key),s.append("file",o),e.$ajax({method:"POST",url:BaseUrl+"apply/appUpload",data:s,headers:{token:sessionStorage.getItem("token"),device:e.$route.query.type}}).then(function(o){500==o.data.flag?(e.$alert(o.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){e.$message({type:"info",message:"error: "+o.data.msg})}}),a(error)):200==o.data.flag?t(o.data.flag):201==o.data.flag&&e.$alert(o.data.msg+"，请重新登录","提示",{confirmButtonText:"确定",callback:function(t){e.$router.push("/")}})})});s.a.all([a,o]).then(function(e){console.log(e),t.progressStepsActive=3;var a=t;t.$ajax.get(BaseUrl+"apply/auto/"+t.$route.query.id,{headers:{token:sessionStorage.getItem("token"),device:a.$route.query.type}}).then(function(t){200==t.data.flag?(a.progressStepsActive=4,a.$alert(t.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){"android"==a.$route.query.type?a.$router.push({path:"/applicationList"}):"ios"==a.$route.query.type&&a.$router.push({path:"/iosList"})}})):201==t.data.flag?a.$alert(t.data.msg+"，请重新登录","提示",{confirmButtonText:"确定",callback:function(t){a.$router.push("/")}}):a.$alert(t.data.msg,"提示",{confirmButtonText:"确定"})})}).catch(function(t){console.log(t)})}}}},780:function(t,e,a){e=t.exports=a(241)(!1),e.push([t.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.progress-wrap{display:flex;align-items:center;justify-content:center;margin:1rem;height:5rem}",""])},885:function(t,e,a){var o=a(780);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(242)("16a06a34",o,!0)}});