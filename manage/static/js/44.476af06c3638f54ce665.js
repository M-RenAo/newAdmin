webpackJsonp([44],{1034:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"table_container"},[a("el-row",{staticStyle:{"margin-bottom":"30px"},attrs:{type:"flex"}},[a("el-col",[a("div",[a("el-button",{staticStyle:{"margin-right":"10px","margin-bottom":"2px"},attrs:{type:"primary"},on:{click:t.addTrumpet}},[t._v("新增\n                    ")]),t._v(" "),a("el-button",{staticStyle:{"margin-right":"10px","margin-bottom":"2px"},attrs:{type:"primary"},on:{click:t.batchCreate}},[t._v("批量创建\n                    ")])],1)]),t._v(" "),a("el-col",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"40%"},attrs:{placeholder:"请输入小号昵称"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.search(t.searchForm)}},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}},[a("el-button",{attrs:{slot:"append"},on:{click:function(e){t.search(t.searchForm)}},slot:"append"},[a("i",{staticClass:"el-icon-search"})])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"头像"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.icon}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"昵称",prop:"name"}}),t._v(" "),a("el-table-column",{key:"upload",attrs:{label:"操作","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"littleButton",on:{click:function(a){t.update(e.row)}}},[t._v("编辑\n                    ")]),t._v(" "),a("el-button",{staticClass:"littleButton",staticStyle:{"margin-left":"0"},on:{click:function(a){t.del(e.row)}}},[t._v("删除\n                    ")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"",visible:t.dialogFormVisible,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"小号名","label-width":t.formLabelWidth}},[a("el-input",{staticStyle:{width:"50%"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{staticClass:"icon-trumpet-el",attrs:{label:"小号头像","label-width":t.formLabelWidth}},[a("input",{staticClass:"upload",staticStyle:{opacity:"0",width:"148px",height:"148px","z-index":"222","vertical-align":"top",position:"absolute"},attrs:{type:"file"},on:{change:t.add_img}}),t._v(" "),a("div",{staticClass:"icon-plus-container",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),""!=t.uploadIconUrl?a("div",{staticClass:"img-wrap"},[a("img",{staticClass:"border-radius",staticStyle:{width:"146px",height:"146px"},attrs:{src:"https://imapp-image.oss-cn-hangzhou.aliyuncs.com/"+t.uploadIconUrl}})]):t._e()])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1,t.uploadIconUrl=""}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.add()}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"",visible:t.bitchFormVisible,"before-close":t.handleClose},on:{"update:visible":function(e){t.bitchFormVisible=e}}},[a("el-form",[a("el-form-item",{attrs:{label:"创建数量","label-width":t.formLabelWidth}},[a("el-input",{staticStyle:{width:"50%"},attrs:{min:"1",max:"200",type:"number"},model:{value:t.numberCreate,callback:function(e){t.numberCreate=e},expression:"numberCreate"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.bitchFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.ensureBatch(t.numberCreate)}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("确认删除小号？")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.deleteEnsure()}}},[t._v("确 定")])],1)]),t._v(" "),a("div",{staticClass:"Pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.nowPageSize,"page-sizes":[5,10,20,40],total:t.txcount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])},staticRenderFns:[]}},301:function(t,e,a){a(915);var o=a(58)(a(751),a(1034),"data-v-4600c114",null);t.exports=o.exports},315:function(t,e,a){"use strict";a.d(e,"b",function(){return o}),a.d(e,"a",function(){return i});var o="",i=void 0;o="//elm.cangdu.org",i="//elm.cangdu.org/img/"},439:function(t,e,a){a(442);var o=a(58)(a(440),a(443),"data-v-771ef16e",null);t.exports=o.exports},440:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(110),i=a.n(o),n=a(109),r=a.n(n),s=a(59),l=a.n(s),c=a(108),d=(a.n(c),a(315)),u=a(111);e.default={data:function(){return{baseImgPath:d.a}},created:function(){},computed:l()({},a.i(u.b)(["adminInfo"])),methods:{handleCommand:function(t){var e=this;return r()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:"home"==t?e.$router.push("/manage"):"singout"==t&&(sessionStorage.removeItem("token"),e.$router.push("/"));case 1:case"end":return a.stop()}},a,e)}))()}}}},441:function(t,e,a){e=t.exports=a(241)(!1),e.push([t.i,".allcover[data-v-771ef16e]{position:absolute;top:0;right:0}.ctt[data-v-771ef16e]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.tb[data-v-771ef16e]{position:absolute;top:50%;transform:translateY(-50%)}.lr[data-v-771ef16e]{position:absolute;left:50%;transform:translateX(-50%)}.header_container[data-v-771ef16e]{background-color:#eff2f7;height:60px;display:flex;justify-content:space-between;align-items:center;width:100%}.avator[data-v-771ef16e]{width:36px;height:36px;border-radius:50%;margin-right:37px}.el-dropdown-menu__item[data-v-771ef16e]{text-align:center}",""])},442:function(t,e,a){var o=a(441);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(242)("31846a3f",o,!0)},443:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header_container"},[a("el-breadcrumb",{staticStyle:{"padding-left":"20px"},attrs:{separator:"/"}},t._l(t.$route.meta,function(e,o){return a("el-breadcrumb-item",{key:o},[t._v(t._s(e))])})),t._v(" "),a("el-dropdown",{attrs:{"menu-align":"start"},on:{command:t.handleCommand}},[a("img",{staticClass:"avator",attrs:{src:t.baseImgPath+t.adminInfo.avatar}}),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"home"}},[t._v("首页")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"singout"}},[t._v("退出")])],1)],1)],1)},staticRenderFns:[]}},751:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=(a(315),a(439)),i=a.n(o);e.default={data:function(){return{id:"",tableData:[],txcount:0,uploadIconUrl:"",searchForm:{},currentPage:1,nowPageSize:10,dialogFormVisible:!1,bitchFormVisible:!1,numberCreate:"",formLabelWidth:"120px",imgData:{accept:"image/gif, image/jpeg, image/png, image/jpg,image/webp"},searchInfo:"",activeName:"first",quizInfo:{topic:"",detail:""},form:{name:""},dialogVisible:!1,delForm:[]}},components:{headTop:i.a},created:function(){var t={page:1,size:10};this.getData(t)},computed:{},methods:{getData:function(t){var e=this;this.$ajax({method:"POST",url:BaseUrl+"agent/query",data:t,headers:{token:sessionStorage.getItem("token")}}).then(function(t){200==t.data.flag?(e.tableData=t.data.data.data,e.txcount=t.data.data.count):201==t.data.flag&&e.$alert(t.data.msg+"，请重新登录","提示",{confirmButtonText:"确定",callback:function(t){e.$router.push("/")}})})},handleSizeChange:function(t){if(this.nowPageSize=t,void 0==this.searchForm.name)var e={page:1,size:t};else{this.searchForm.page=1,this.searchForm.size=t;var e=this.searchForm}this.getData(e)},handleCurrentChange:function(t){if(this.currentPage=t,void 0==this.searchForm.name)var e={page:t,size:this.nowPageSize||10};else{this.searchForm.page=t,this.searchForm.size=this.nowPageSize||10;var e=this.searchForm}this.getData(e)},addTrumpet:function(){this.dialogFormVisible=!0,this.form={}},add_img:function(t){var e=this,a=null;this.$ajax.get(BaseUrl+"alioss/getpolicy",{params:{fileName:t.target.files[0].name,type:"image",callBackType:"app_image"},headers:{token:sessionStorage.getItem("token")}}).then(function(o){if(200==o.data.flag)a=o.data.data,e.UploadUrl=o.data.data.host;else{if(201!=o.data.flag)return void alert("权限获取失败！");e.$alert(o.data.msg+"，请重新登录","提示",{confirmButtonText:"确定",callback:function(t){e.$router.push("/")}})}var i=t.target.files[0],n=i.type;i.size;if(-1==e.imgData.accept.indexOf(n))return alert("请选择我们支持的图片格式！"),!1;var r=new FormData;r.append("key",a.key),r.append("OSSAccessKeyId",a.OSSAccessKeyId),r.append("expire",a.expire),r.append("policy",a.policy),r.append("Signature",a.Signature),r.append("callback",a.callback),r.append("file",i),r.append("x:user",sessionStorage.getItem("userName")),r.append("x:filename",a.fileName),r.append("x:type",a.type),e.$ajax({method:"POST",url:e.UploadUrl,data:r}).then(function(t){e.uploadIconUrl=t.data.data,e.form.icon=t.data.data})})},update:function(t){this.dialogFormVisible=!0,this.form=t},search:function(t){t.page=1,t.size=this.nowPageSize||10,this.getData(t)},handleClose:function(t){var e=this;this.$confirm("确认关闭？").then(function(a){t(),e.uploadIconUrl=""}).catch(function(t){})},add:function(){var t=this;void 0==this.form.name?this.$alert("请填写昵称","提示",{confirmButtonText:"确定",callback:function(e){t.$message({type:"info",message:"error: "+response.data.msg+",请重试"})}}):void 0==this.form.id?this.$ajax({method:"POST",url:BaseUrl+"agent/new",data:this.form,headers:{token:sessionStorage.getItem("token")}}).then(function(e){"200"==e.data.flag?(t.$alert(e.data.msg,"提示",{confirmButtonText:"确定",callback:function(e){t.getData({page:1,size:10})}}),t.dialogFormVisible=!1):201==e.data.flag?t.$alert(e.data.msg+"，请重新登录","提示",{confirmButtonText:"确定",callback:function(e){t.$router.push("/")}}):t.$alert(e.data.msg,"提示",{confirmButtonText:"确定",callback:function(a){t.$message({type:"info",message:"error: "+e.data.msg+",请重试"})}})}):this.$ajax({method:"POST",url:BaseUrl+"agent/update",data:this.form,headers:{token:sessionStorage.getItem("token")}}).then(function(e){"200"==e.data.flag?(t.$alert(e.data.msg,"提示",{confirmButtonText:"确定",callback:function(e){t.getData({page:1,size:10})}}),t.dialogFormVisible=!1):201==e.data.flag?t.$alert(e.data.msg+"，请重新登录","提示",{confirmButtonText:"确定",callback:function(e){t.$router.push("/")}}):t.$alert(e.data.msg,"提示",{confirmButtonText:"确定",callback:function(a){t.$message({type:"info",message:"error: "+e.data.msg+",请重试"})}})})},del:function(t){this.delForm=[],this.dialogVisible=!0,this.delForm.push(t)},deleteEnsure:function(){var t=this;this.dialogVisible=!1,this.$ajax({method:"POST",url:BaseUrl+"agent/remove",data:this.delForm,headers:{token:sessionStorage.getItem("token")}}).then(function(e){200==e.data.flag?t.$message({type:"success",message:"删除成功!",callback:function(e){t.getData({page:1,size:10})}}):201==e.data.flag?t.$alert(e.data.msg+"，请重新登录","提示",{confirmButtonText:"确定",callback:function(e){t.$router.push("/")}}):t.$message({type:"error",message:"删除失败!"})})},batchCreate:function(){this.bitchFormVisible=!0,this.numberCreate=""},ensureBatch:function(t){var e=this;t>200||t<1?this.$alert("请输入1～200的数字","提示",{confirmButtonText:"确定"}):this.$ajax({method:"POST",url:BaseUrl+"agent/create",params:{num:Number(t)},headers:{token:sessionStorage.getItem("token")}}).then(function(t){"200"==t.data.flag?(e.$alert(t.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){e.getData({page:1,size:10})}}),e.bitchFormVisible=!1):201==t.data.flag?e.$alert(t.data.msg+"，请重新登录","提示",{confirmButtonText:"确定",callback:function(t){e.$router.push("/")}}):e.$alert(t.data.msg,"提示",{confirmButtonText:"确定",callback:function(a){e.$message({type:"info",message:"error: "+t.data.msg+",请重试"})}})})}}}},810:function(t,e,a){e=t.exports=a(241)(!1),e.push([t.i,".allcover[data-v-4600c114]{position:absolute;top:0;right:0}.ctt[data-v-4600c114]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.tb[data-v-4600c114]{position:absolute;top:50%;transform:translateY(-50%)}.lr[data-v-4600c114]{position:absolute;left:50%;transform:translateX(-50%)}.table_container[data-v-4600c114]{padding:20px}.littleButton[data-v-4600c114]{padding:5px 10px!important;margin-left:0!important}.border-radius[data-v-4600c114]{border-radius:6px;height:auto;width:148px}.icon-trumpet-el[data-v-4600c114]{height:147px;position:relative}.icon-trumpet-el .el-form-item__content[data-v-4600c114]{display:flex;position:absolute}.icon-trumpet-el div.el-form-item__content[data-v-4600c114]{border:0!important}.icon-trumpet-el div[data-v-4600c114]{background-color:#fbfdff;border:1px dashed #c0ccda;border-radius:6px;box-sizing:border-box;width:148px;height:148px;cursor:pointer;line-height:146px;position:absolute;top:0}",""])},915:function(t,e,a){var o=a(810);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(242)("19ef73c6",o,!0)}});